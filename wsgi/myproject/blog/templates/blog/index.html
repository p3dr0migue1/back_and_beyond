{% extends "base.html" %}

{% block content %}
    {% block posts %}
        {% if posts %}
            {% for post in posts %}
                <div class="post-block">
                    <h2>{{ post.title }} <span class="post-date">{{ post.date_created|date:'d M Y' }}</span></h2>
                    {{ post.html_text|safe }}
                    <div class="post-footer">
                        {% if post.tags.all %}
                            <span class="tags">Tags:
                            {% for tag in post.tags.all %}
                                <a href="{% url 'blog:posts_in_tag' tag.slug  %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                            </span>
                            <span class="edit"><a href="/admin/blog/posts/{{ post.id }}/change/">Edit post</a></span>
                        {% else %}
                            <span class="tags">No Tags assign to this post.</span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <h4>No posts to display yet..</h4>
        {% endif %}
    {% endblock posts %}
{% endblock content %}

{% block side_nav %}
    {% if tags %}
        <div id="tags-block">
            <span class="widget-title">tags:</span>
            <ul>
            {% for t_obj in tags %}
                <li><a href="{% url 'blog:posts_in_tag' t_obj.tag__slug %}">{{ t_obj.tag__name }}</a> {{ t_obj.tag__count }}</li>
            {% endfor %}
            </ul>
        </div>
    {% endif %}
{% endblock side_nav %}
